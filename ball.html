<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Canvas</title>
  <style>
    canvas { border: 1px solid black; }
  </style>
</head>

<body>

<canvas id="canvas-for-ball" width="400" height="300"></canvas>

<script>
  var canvas = document.getElementById("canvas-for-ball");
  var ctx = canvas.getContext("2d");

  class Paddle {
    constructor(x, y) {
      this.x = x;
      this.y = y;
      this.width = 10;
      this.height = 60;
    }
    draw() {
      ctx.fillRect(this.x, this.y, this.width, this.height);
    }
    move(dy) {
      this.y += dy;
    }
  }

  var paddle1 = new Paddle(20, 100);
  var paddle2 = new Paddle(canvas.width - 30, 100);

  var ballX = 200;
  var ballY = 150;
  var vx = 3;
  var vy = 2;

  document.addEventListener("keydown", function(e) {
    if (e.key === "ArrowUp") paddle1.move(-10);
    if (e.key === "ArrowDown") paddle1.move(10);
    if (e.key === "w" || e.key === "W") paddle2.move(-10);
    if (e.key === "s" || e.key === "S") paddle2.move(10);
  });

  canvas.addEventListener("mousemove", function(e) {
    var rect = canvas.getBoundingClientRect();
    var mouseY = e.clientY - rect.top;
    paddle1.y = mouseY - paddle1.height / 2;
  });

  function loop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ballX += vx;
    ballY += vy;

    if (ballY < 0 || ballY > canvas.height) vy = -vy;

    if (ballX < paddle1.x + paddle1.width &&
        ballY > paddle1.y &&
        ballY < paddle1.y + paddle1.height) {
      vx = -vx;
    }

    if (ballX > paddle2.x &&
        ballY > paddle2.y &&
        ballY < paddle2.y + paddle2.height) {
      vx = -vx;
    }

    ctx.beginPath();
    ctx.arc(ballX, ballY, 5, 0, 2 * Math.PI);
    ctx.fill();

    paddle1.draw();
    paddle2.draw();

    requestAnimationFrame(loop);
  }

  loop();
</script>

</body>
</html>
